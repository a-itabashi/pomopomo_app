<h1 class="text-center">管理者専用　ユーザー一覧</h1>

<div class="x-scroll">
  <table class="table form_font">
    <thead class="text-center">
      <th>プロフィール画像</th>
      <th>ユーザー名</th>
      <th>メールアドレス</th>
      <th>管理者権限</th>
      <th>Oauth認証先</th>
      <th></th>
      <th></th>
      <th></th>
    </thead>
    <tbody>
    <% @users.each do |user| %>
      <tr>
        <td class="align-middle text-center">
          <!-- Oauth認証の場合 -->
          <% if user.provider.present? %>
          <%= image_tag user.image_url, size: "100x100" %>
          <% end %>
          <!-- Oauth認証で無い場合 -->
          <% unless user.provider.present? %>  
          <%= image_tag user.avatar.variant(resize:'100x100').processed if user.avatar.attached? %>
          <% end %>
        </td>
        <td class="align-middle"><%= user.name %></td>
        <td class="align-middle"><%= user.email %></td>
        <td class="align-middle text-center"><%= user.admin ? "有り" : "ー" %></td>
        <td class="align-middle text-center"><%= user.provider.present? ? user.provider : "ー" %></td>
        <td class="align-middle text-center"><%= link_to "詳細", user %></td>
        <td class="align-middle text-center"><%= link_to "編集", edit_admin_user_path(user) %></td>
        <td class="align-middle text-center"><%= link_to "削除", admin_user_path(user), 
          method: :delete, data: {confirm: "削除して宜しいですか？"} %>
        </td>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>